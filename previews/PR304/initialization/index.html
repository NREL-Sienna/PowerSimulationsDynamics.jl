<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Initialization · PowerSimulationsDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PowerSimulationsDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PowerSimulationsDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><a class="tocitem" href="../quick_start_guide/">Quick Start Guide</a></li><li><a class="tocitem" href="../execute/">Simulation Execution</a></li><li><a class="tocitem" href="../tutorials_page/">Tutorials</a></li><li><a class="tocitem" href="../models/">Models</a></li><li class="is-active"><a class="tocitem" href>Initialization</a><ul class="internal"><li><a class="tocitem" href="#Initialization-interface"><span>Initialization interface</span></a></li><li><a class="tocitem" href="#System-wide-initialization-routine"><span>System-wide initialization routine</span></a></li><li><a class="tocitem" href="#Initialization-of-the-Synchronous-Machines"><span>Initialization of the Synchronous Machines</span></a></li><li><a class="tocitem" href="#Initialization-of-the-Inverters"><span>Initialization of the Inverters</span></a></li></ul></li><li><a class="tocitem" href="../small/">Small Signal</a></li><li><a class="tocitem" href="../reference_frames/">Reference Frames</a></li><li><a class="tocitem" href="../perturbations/">Perturbations</a></li><li><a class="tocitem" href="../generic/">Industrial Renewable Models</a></li><li><span class="tocitem">Generator Component Library</span><ul><li><a class="tocitem" href="../component_models/machines/">Machine</a></li><li><a class="tocitem" href="../component_models/shafts/">Shaft</a></li><li><a class="tocitem" href="../component_models/avr/">AVR</a></li><li><a class="tocitem" href="../component_models/pss/">PSS</a></li><li><a class="tocitem" href="../component_models/turbine_gov/">Turbine and Governor</a></li></ul></li><li><span class="tocitem">CIG Component Library</span><ul><li><a class="tocitem" href="../component_models/converter/">Converter</a></li><li><a class="tocitem" href="../component_models/dc_source/">DC Sources</a></li><li><a class="tocitem" href="../component_models/filters/">Filter</a></li><li><a class="tocitem" href="../component_models/freq_esti/">Frequency Estimators</a></li><li><a class="tocitem" href="../component_models/inner_control/">Inner Control</a></li><li><a class="tocitem" href="../component_models/outer_control/">Outer Control</a></li></ul></li><li><span class="tocitem">Branch Models</span><ul><li><a class="tocitem" href="../component_models/network/">Network</a></li></ul></li><li><span class="tocitem">Load Models</span><ul><li><a class="tocitem" href="../component_models/loads/">Load Models</a></li></ul></li><li><span class="tocitem">Code Base Developer Guide</span><ul><li><a class="tocitem" href="../code_base_developer_guide/developer/">Developer Guide</a></li></ul></li><li><a class="tocitem" href="../api/public/">Public API Reference</a></li><li><a class="tocitem" href="../api/internal/">Internal API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Initialization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Initialization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-SIIP/PowerSimulationsDynamics.jl/blob/master/docs/src/initialization.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Initialization-Routine"><a class="docs-heading-anchor" href="#Initialization-Routine">Initialization Routine</a><a id="Initialization-Routine-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization-Routine" title="Permalink"></a></h1><p>Dynamic Simulations require a reasonable initial condition for the system model. In most analysis, power systems models are initialized at a stable equilibrium, which implies that:</p><p class="math-container">\[\begin{align}
0 = F(x, u, \eta)
\end{align}\]</p><p>Finding the solution of a large non-linear system is challenging and requires a reasonable initial guess. In classical power systems literature, the routine to find equilibrium points for the dynamic injection devices&#39; components is well known and used in free and commercial software (see <a href="https://www.springer.com/gp/book/9783642136689">Power System Modelling and Scripting</a> page 224). However, in the case of converter interface dynamic injection models, such routines are not documented.</p><p>Initializing the system also requires finding valid set-points for the devices in the system. For instance, finding the reference voltage in an AVR to match the voltage magnitude resulting from the power flow solution. <code>PowerSimulationsDynamics.jl</code> prioritizes mathching the dynamic components control references to match the power flow results.</p><p>Finally, the initialization must instantiate not only the values of the states but also the inner vars. <code>PowerSimulationsDynamics.jl</code> handles all this initializations by default.</p><h2 id="Initialization-interface"><a class="docs-heading-anchor" href="#Initialization-interface">Initialization interface</a><a id="Initialization-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization-interface" title="Permalink"></a></h2><p>By default <code>PowerSimulationsDynamics.jl</code> initializes the system following the steps described below. it is possible to provide an initial guess for the initial conditions to speed up the initialization process.</p><pre><code class="language-julia hljs">Simulation(
        ResidualModel,
        sys,
        pwd(),
        (0.0, 20.0);
        initial_conditions = x0_init,
    )</code></pre><p>It is also possible to initialize the simulation using a flat start (<code>V_mag = 1.0</code>, <code>V_angle = 0.0</code> and <code>x0 = zeros</code>) using <code>initialize_simulation = false</code>. However, for medium or large system this is unlikely to result in a valid initial condition for the simulation.</p><pre><code class="language-julia hljs">Simulation(
        ResidualModel,
        sys,
        pwd(),
        (0.0, 20.0);
        initialize_simulation = false,
    )</code></pre><p>If you want to avoid <code>PowerSimulationsDynamics.jl</code> from finding an stable equilibrium automatically and provide the initial condition manually you can use the following flag combination.</p><pre><code class="language-julia hljs">Simulation(
        ResidualModel,
        sys,
        pwd(),
        (0.0, 20.0);
        initialize_simulation = false,
        initial_conditions = x0_init,
    )</code></pre><p>&lt;span style=&quot;color:red&quot;&gt;<em>WARNING!</em>&lt;/span&gt;: when the <code>initialize_simulation</code> is set to <code>false</code>, neither the device set points nor the inner vars are initialized. Use these keywords with care and make sure the values in the system components match the initial conditions provided.</p><h2 id="System-wide-initialization-routine"><a class="docs-heading-anchor" href="#System-wide-initialization-routine">System-wide initialization routine</a><a id="System-wide-initialization-routine-1"></a><a class="docs-heading-anchor-permalink" href="#System-wide-initialization-routine" title="Permalink"></a></h2><p>The initialization routine starts from the solution of the power flow equations. For each dynamic injection device <code>PowerSimulationsDynamics.jl</code> finds the solution of the systems of non-linear equations for each dynamic component following the sequences described in the forthcoming sections.</p><p>Once each device is individually initialized, the system-wide initial guess is used to solve the system (1). In a first attempt at finding the solution, the tolerance is set to a stringent tolerance. If the non-linear solver is unable to get a solution, it might usually reflect small signal stability problems in the system. In a second attempt, the tolerances are relaxed. If the solver succeeds, the simulation continues, but the user is warned.</p><img src="../assets/sys_init.png" width="65%"><h2 id="Initialization-of-the-Synchronous-Machines"><a class="docs-heading-anchor" href="#Initialization-of-the-Synchronous-Machines">Initialization of the Synchronous Machines</a><a id="Initialization-of-the-Synchronous-Machines-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization-of-the-Synchronous-Machines" title="Permalink"></a></h2><p>The initialization of Synchronous Machines is standard in power systems and follows the scheme shown in the figure. Other internal variables are calculated recursively from the power flow solution for the node on which the dynamic device isconnected. (Adapted from <a href="https://www.springer.com/gp/book/9783642136689">Power System Modelling and Scripting</a> Figure 9.2)</p><p><img src="../assets/synch_init.png" alt="init_machine"/></p><h2 id="Initialization-of-the-Inverters"><a class="docs-heading-anchor" href="#Initialization-of-the-Inverters">Initialization of the Inverters</a><a id="Initialization-of-the-Inverters-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization-of-the-Inverters" title="Permalink"></a></h2><p>Initializing the inverters follows the sequence shown in the figure and has been developed to be compatible with the implementation of custom dynamic components. Given that the process is less studied and standard than the one of the synchronous machine, this page contains more detailed documentation of the process.</p><p><img src="../assets/inverter_init.png" alt="init_machine"/></p><ol><li>The first component to be initialized is the filter. Given that the filter is an RLC circuit connected to the grid, its currents and voltages need to match the results of the power flow. The initialization of the filter provides the values for the <span>$P$</span> and <span>$Q$</span> used in the outer control and the <span>$V$</span> and <span>$I$</span> needed in the inner controls.</li><li>Based on the bus voltage in the system&#39;s reference frame <span>$V_r$</span> and the bus angle <span>$\theta$</span> the PLL&#39;s can be initialized to obtain the angle and frequency estimates needed by the outer control.</li><li>The Outer Control calculates the internal angle <span>$\delta_{olc}$</span> required by the inner control to estimate the voltage and current phase difference.</li><li>The DC Source uses the power set-point consistent with the power outputs of the filter to initialize the <span>$V_{dc}$</span> set-points. This value is used in the inner control.</li><li>The inner control takes the phase angle <span>$\delta_{olc}$</span> and the <span>$V_{dc}$</span> to estimate the modulation values of the PWM converter.</li></ol><p><strong>Note:</strong> The initialization of an inverter through the proposed meta-model is actively under development and subject to change. This page will maintain the latest version of the sequence.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../models/">« Models</a><a class="docs-footer-nextpage" href="../small/">Small Signal »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 5 January 2023 23:58">Thursday 5 January 2023</span>. Using Julia version 1.8.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
