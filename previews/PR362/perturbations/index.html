<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Perturbations · PowerSimulationsDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PowerSimulationsDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PowerSimulationsDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><a class="tocitem" href="../quick_start_guide/">Quick Start Guide</a></li><li><a class="tocitem" href="../execute/">Simulation Execution</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/tutorial_dynamic_data/">Create Dynamic Data</a></li><li><a class="tocitem" href="../tutorials/tutorial_omib/">OMIB</a></li><li><a class="tocitem" href="../tutorials/tutorial_dynamic_lines/">Dynamic Lines Simulation</a></li><li><a class="tocitem" href="../tutorials/tutorial_inverter_modeling/">Inverter Modeling</a></li><li><a class="tocitem" href="../tutorials/tutorial_240bus/">240 WECC solver comparison</a></li><li><a class="tocitem" href="../tutorials/tutorial_continuation_pf/">Small-Signal Analysis</a></li><li><a class="tocitem" href="../tutorials/tutorial_activeload/">Active Load Model</a></li></ul></li><li><a class="tocitem" href="../models/">Models</a></li><li><a class="tocitem" href="../initialization/">Initialization</a></li><li><a class="tocitem" href="../small/">Small Signal</a></li><li><a class="tocitem" href="../reference_frames/">Reference Frames</a></li><li class="is-active"><a class="tocitem" href>Perturbations</a><ul class="internal"><li><a class="tocitem" href="#List-of-perturbations"><span>List of perturbations</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../time_delays/">Time Delays</a></li><li><a class="tocitem" href="../generic/">Industrial Renewable Models</a></li><li><span class="tocitem">Generator Component Library</span><ul><li><a class="tocitem" href="../component_models/machines/">Machine</a></li><li><a class="tocitem" href="../component_models/shafts/">Shaft</a></li><li><a class="tocitem" href="../component_models/avr/">AVR</a></li><li><a class="tocitem" href="../component_models/pss/">PSS</a></li><li><a class="tocitem" href="../component_models/turbine_gov/">Turbine and Governor</a></li></ul></li><li><span class="tocitem">CIG Component Library</span><ul><li><a class="tocitem" href="../component_models/converter/">Converter</a></li><li><a class="tocitem" href="../component_models/dc_source/">DC Sources</a></li><li><a class="tocitem" href="../component_models/filters/">Filter</a></li><li><a class="tocitem" href="../component_models/freq_esti/">Frequency Estimators</a></li><li><a class="tocitem" href="../component_models/inner_control/">Inner Control</a></li><li><a class="tocitem" href="../component_models/outer_control/">Outer Control</a></li></ul></li><li><span class="tocitem">Branch Models</span><ul><li><a class="tocitem" href="../component_models/network/">Network</a></li></ul></li><li><span class="tocitem">Load Models</span><ul><li><a class="tocitem" href="../component_models/loads/">Load Models</a></li></ul></li><li><span class="tocitem">Code Base Developer Guide</span><ul><li><a class="tocitem" href="../code_base_developer_guide/developer/">Developer Guide</a></li></ul></li><li><a class="tocitem" href="../api/public/">Public API Reference</a></li><li><a class="tocitem" href="../api/internal/">Internal API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Perturbations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Perturbations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-Sienna/PowerSimulationsDynamics.jl/blob/main/docs/src/perturbations.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Perturbations"><a class="docs-heading-anchor" href="#Perturbations">Perturbations</a><a id="Perturbations-1"></a><a class="docs-heading-anchor-permalink" href="#Perturbations" title="Permalink"></a></h1><p>Perturbations are used to alter the system from its steady state operation. If a Simulation is properly initialized, all states will remain fixed in their initial condition if no perturbation is applied to the system.</p><h2 id="List-of-perturbations"><a class="docs-heading-anchor" href="#List-of-perturbations">List of perturbations</a><a id="List-of-perturbations-1"></a><a class="docs-heading-anchor-permalink" href="#List-of-perturbations" title="Permalink"></a></h2><ul><li><a href="../api/public/#PowerSimulationsDynamics.NetworkSwitch"><code>NetworkSwitch</code></a>: allows to modify directly the admittance matrix, <code>Ybus</code>, used in the Simulation.</li><li><a href="../api/public/#PowerSimulationsDynamics.BranchTrip"><code>BranchTrip</code></a>: completely disconnects a branch from the system.</li><li><a href="../api/public/#PowerSimulationsDynamics.BranchImpedanceChange"><code>BranchImpedanceChange</code></a>: change the impedance of a branch by a user defined multiplier. </li><li><a href="../api/public/#PowerSimulationsDynamics.GeneratorTrip"><code>GeneratorTrip</code></a>: allows to disconnect a Dynamic Generation unit from the system.</li><li><a href="../api/public/#PowerSimulationsDynamics.ControlReferenceChange"><code>ControlReferenceChange</code></a>: allows to change the reference setpoint provided by a generator/inverter.</li><li><a href="../api/public/#PowerSimulationsDynamics.LoadChange"><code>LoadChange</code></a>: allows to change the active or reactive power setpoint from a load.</li><li><a href="../api/public/#PowerSimulationsDynamics.LoadTrip"><code>LoadTrip</code></a>: allows the user to disconnect a load from the system.</li><li><a href="../api/public/#PowerSimulationsDynamics.SourceBusVoltageChange"><code>SourceBusVoltageChange</code></a>: allows to change the reference setpoint provided by a voltage source.</li></ul><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><h3 id="Example-1:-Circuit-Disconnection-using-NetworkSwitch"><a class="docs-heading-anchor" href="#Example-1:-Circuit-Disconnection-using-NetworkSwitch">Example 1: Circuit Disconnection using <code>NetworkSwitch</code></a><a id="Example-1:-Circuit-Disconnection-using-NetworkSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1:-Circuit-Disconnection-using-NetworkSwitch" title="Permalink"></a></h3><p>Consider a two bus system connected via a double circuit line, on which each circuit has parameters, <code>r = 0.0, x = 0.1, b = 0.0</code> per unit, then the admittance matrix of the original system is given by:</p><pre><code class="language-julia hljs">yb = [0.0 - 20.0im 0.0 + 20.0im
      0.0 + 20.0im 0.0 - 20.0im]</code></pre><p>Triping one circuit can be modeled by doubling the impedance, i.e., dividing by 2 the admittance:</p><pre><code class="language-julia hljs">new_yb = [0.0 - 10.0im 0.0 + 10.0im
          0.0 + 10.0im 0.0 - 10.0im]</code></pre><p>To apply a Network Switch, we require to use a sparse matrix, so we can do this by simply:</p><pre><code class="language-julia hljs">using SparseArrays
new_yb = sparse(new_yb)</code></pre><p>Then, this perturbation ocurring at <span>$t = 1.0$</span> seconds can be included as:</p><pre><code class="language-julia hljs">ns1 = NetworkSwitch(1.0, new_yb)</code></pre><h3 id="Example-2:-Three-Phase-Fault-using-NetworkSwitch"><a class="docs-heading-anchor" href="#Example-2:-Three-Phase-Fault-using-NetworkSwitch">Example 2: Three Phase Fault using <code>NetworkSwitch</code></a><a id="Example-2:-Three-Phase-Fault-using-NetworkSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2:-Three-Phase-Fault-using-NetworkSwitch" title="Permalink"></a></h3><p>Another perturbation that can be modeled is a three phase fault at Bus 1 with impedance <code>r_f = 0.0001, x_f = 0.0</code> per unit, then the admittance of this new system is:</p><pre><code class="language-julia hljs">new_yb2 = [10000.0 - 20.0im  0.0 + 20.0im
           0.0 + 20.0im  0.0 - 20.0im]</code></pre><p>Then, this perturbation ocurring at <span>$t = 1.0$</span> seconds can be included as:</p><pre><code class="language-julia hljs">new_yb2 = sparse(new_yb2)
ns2 = NetworkSwitch(1.0, new_yb2)</code></pre><p>Now, consider that the fault is cleared at <span>$t = 1.05$</span> seconds by disconnecting the Circuit 2 of the line. This can be modeled with the single circuit admittance matrix:</p><pre><code class="language-julia hljs">new_yb3 = [0.0 - 10.0im 0.0 + 10.0im
           0.0 + 10.0im 0.0 - 10.0im]</code></pre><p>and the perturbation as:</p><pre><code class="language-julia hljs">new_yb3 = sparse(new_yb3)
ns3 = NetworkSwitch(1.05, new_yb3)</code></pre><p>Then, the entire perturbation for the Simulation can be included in a vector of perturbations as:</p><pre><code class="language-julia hljs">three_fault = [ns2, ns3]</code></pre><p>that can be passed as a perturbation argument in the Simulation construction.</p><h3 id="Example-3:-BranchTrip"><a class="docs-heading-anchor" href="#Example-3:-BranchTrip">Example 3: <code>BranchTrip</code></a><a id="Example-3:-BranchTrip-1"></a><a class="docs-heading-anchor-permalink" href="#Example-3:-BranchTrip" title="Permalink"></a></h3><p>Consider the following 2 bus system defined by:</p><pre><code class="language-julia hljs">buses = [
    Bus(1, &quot;nodeA&quot;, &quot;REF&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing),
    Bus(2, &quot;nodeB&quot;, &quot;PV&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing),
]

line1 = Line(
        &quot;Circuit1&quot;,
        true,
        0.0,
        0.0,
        Arc(from = buses[1], to = buses[2]),
        0.00,
        0.1,
        (from = 0.0, to = 0.0),
        2.0,
        (min = -0.7, max = 0.7),
    )
line2 = Line(
        &quot;Circuit2&quot;,
        true,
        0.0,
        0.0,
        Arc(from = buses[1], to = buses[2]),
        0.0,
        0.1,
        (from = 0.0, to = 0.0),
        2.0,
        (min = -0.7, max = 0.7),
    )

sys = System(100.0, buses, [], [], [line1, line2])</code></pre><p>A Branch Trip of Circuit 2 at time <span>$t = 1.0$</span> seconds, can be implemented as:</p><pre><code class="language-julia hljs">b_trip = BranchTrip(1.0, Line, &quot;Circuit2&quot;)</code></pre><p><strong>Note:</strong> Islanding is currently not supported in <code>PowerSimulationsDynamics.jl</code>. If a <code>BranchTrip</code> isolates a generation unit, the system may diverge due to the isolated generator.</p><h3 id="Example-4:-BranchImpedanceChange"><a class="docs-heading-anchor" href="#Example-4:-BranchImpedanceChange">Example 4: <code>BranchImpedanceChange</code></a><a id="Example-4:-BranchImpedanceChange-1"></a><a class="docs-heading-anchor-permalink" href="#Example-4:-BranchImpedanceChange" title="Permalink"></a></h3><p>Following the same example as before, it is possible to amplify the impedance of a single circuit by 2.0 (that would represent that this Circuit is actually composed by 2 circuits) using the following perturbation:</p><pre><code class="language-julia hljs">b_change = BranchImpedanceChange(1.0, Line, &quot;Circuit2&quot;, 2.0)</code></pre><h3 id="Example-5:-GeneratorTrip"><a class="docs-heading-anchor" href="#Example-5:-GeneratorTrip">Example 5: <code>GeneratorTrip</code></a><a id="Example-5:-GeneratorTrip-1"></a><a class="docs-heading-anchor-permalink" href="#Example-5:-GeneratorTrip" title="Permalink"></a></h3><p>Consider that you have a generator at bus 102, named <code>&quot;generator-102-1&quot;</code> in your system called <code>sys</code>. The constructor to trip it from the system is:</p><pre><code class="language-julia hljs">g = get_component(DynamicGenerator, sys, &quot;generator-102-1&quot;)
g_trip = GeneratorTrip(1.0, g)</code></pre><h3 id="Example-6:-ControlReferenceChange"><a class="docs-heading-anchor" href="#Example-6:-ControlReferenceChange">Example 6: <code>ControlReferenceChange</code></a><a id="Example-6:-ControlReferenceChange-1"></a><a class="docs-heading-anchor-permalink" href="#Example-6:-ControlReferenceChange" title="Permalink"></a></h3><p>Consider that you have a generator at bus 102, named <code>&quot;generator-102-1&quot;</code> in your system called <code>sys</code>. The constructor to change is active power reference to <code>0.5</code> is:</p><pre><code class="language-julia hljs">g = get_component(DynamicGenerator, sys, &quot;generator-102-1&quot;)
crc = ControlReferenceChange(1.0, g, :P_ref, 0.5)</code></pre><h3 id="Example-7:-LoadChange"><a class="docs-heading-anchor" href="#Example-7:-LoadChange">Example 7: <code>LoadChange</code></a><a id="Example-7:-LoadChange-1"></a><a class="docs-heading-anchor-permalink" href="#Example-7:-LoadChange" title="Permalink"></a></h3><p>Consider that you have a load at bus 103, named <code>&quot;load-103-1&quot;</code> in your system called <code>sys</code>. The constructor to change is active power reference to <code>0.8</code> per unit at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">l_device = get_component(ElectricLoad, sys, &quot;load-103-1&quot;)
l_change = LoadChange(1.0, l_device, :P_ref, 0.8)</code></pre><h3 id="Example-8:-LoadTrip"><a class="docs-heading-anchor" href="#Example-8:-LoadTrip">Example 8: <code>LoadTrip</code></a><a id="Example-8:-LoadTrip-1"></a><a class="docs-heading-anchor-permalink" href="#Example-8:-LoadTrip" title="Permalink"></a></h3><p>Consider that you have a load at bus 103, named <code>&quot;load-103-1&quot;</code> in your system called <code>sys</code>. The constructor to disconnect such load at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">l_device = get_component(ElectricLoad, sys, &quot;load-103-1&quot;)
l_trip = LoadTrip(1.0, l_device)</code></pre><h3 id="Example-9:-SourceBusVoltageChange"><a class="docs-heading-anchor" href="#Example-9:-SourceBusVoltageChange">Example 9: <code>SourceBusVoltageChange</code></a><a id="Example-9:-SourceBusVoltageChange-1"></a><a class="docs-heading-anchor-permalink" href="#Example-9:-SourceBusVoltageChange" title="Permalink"></a></h3><p>Consider that you have a voltage source at bus 101, named <code>&quot;source-101-1&quot;</code> in your system called <code>sys</code>. The constructor to change is voltage magnitude reference to <code>1.02</code> per unit at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">s_device = get_component(Source, sys, &quot;source-101-1&quot;)
s_change = SourceBusVoltageChange(1.0, s_device, 1, 1.02)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reference_frames/">« Reference Frames</a><a class="docs-footer-nextpage" href="../time_delays/">Time Delays »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 5 January 2024 18:51">Friday 5 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
