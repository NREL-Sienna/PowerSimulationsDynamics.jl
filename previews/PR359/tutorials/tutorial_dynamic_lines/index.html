<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dynamic Lines Simulation · PowerSimulationsDynamics.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSimulationsDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerSimulationsDynamics.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><a class="tocitem" href="../../quick_start_guide/">Quick Start Guide</a></li><li><a class="tocitem" href="../../execute/">Simulation Execution</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorial_dynamic_data/">Create Dynamic Data</a></li><li><a class="tocitem" href="../tutorial_omib/">OMIB</a></li><li class="is-active"><a class="tocitem" href>Dynamic Lines Simulation</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li></ul></li><li><a class="tocitem" href="../tutorial_inverter_modeling/">Inverter Modeling</a></li><li><a class="tocitem" href="../tutorial_240bus/">240 WECC solver comparison</a></li><li><a class="tocitem" href="../tutorial_continuation_pf/">Small-Signal Analysis</a></li><li><a class="tocitem" href="../tutorial_activeload/">Active Load Model</a></li></ul></li><li><a class="tocitem" href="../../models/">Models</a></li><li><a class="tocitem" href="../../initialization/">Initialization</a></li><li><a class="tocitem" href="../../small/">Small Signal</a></li><li><a class="tocitem" href="../../reference_frames/">Reference Frames</a></li><li><a class="tocitem" href="../../perturbations/">Perturbations</a></li><li><a class="tocitem" href="../../generic/">Industrial Renewable Models</a></li><li><span class="tocitem">Generator Component Library</span><ul><li><a class="tocitem" href="../../component_models/machines/">Machine</a></li><li><a class="tocitem" href="../../component_models/shafts/">Shaft</a></li><li><a class="tocitem" href="../../component_models/avr/">AVR</a></li><li><a class="tocitem" href="../../component_models/pss/">PSS</a></li><li><a class="tocitem" href="../../component_models/turbine_gov/">Turbine and Governor</a></li></ul></li><li><span class="tocitem">CIG Component Library</span><ul><li><a class="tocitem" href="../../component_models/converter/">Converter</a></li><li><a class="tocitem" href="../../component_models/dc_source/">DC Sources</a></li><li><a class="tocitem" href="../../component_models/filters/">Filter</a></li><li><a class="tocitem" href="../../component_models/freq_esti/">Frequency Estimators</a></li><li><a class="tocitem" href="../../component_models/inner_control/">Inner Control</a></li><li><a class="tocitem" href="../../component_models/outer_control/">Outer Control</a></li></ul></li><li><span class="tocitem">Branch Models</span><ul><li><a class="tocitem" href="../../component_models/network/">Network</a></li></ul></li><li><span class="tocitem">Load Models</span><ul><li><a class="tocitem" href="../../component_models/loads/">Load Models</a></li></ul></li><li><span class="tocitem">Code Base Developer Guide</span><ul><li><a class="tocitem" href="../../code_base_developer_guide/developer/">Developer Guide</a></li></ul></li><li><a class="tocitem" href="../../api/public/">Public API Reference</a></li><li><a class="tocitem" href="../../api/internal/">Internal API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Dynamic Lines Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dynamic Lines Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-Sienna/PowerSimulationsDynamics.jl/blob/main/docs/src/tutorials/tutorial_dynamic_lines.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Line-Modeling-Simulations"><a class="docs-heading-anchor" href="#Line-Modeling-Simulations">Line Modeling Simulations</a><a id="Line-Modeling-Simulations-1"></a><a class="docs-heading-anchor-permalink" href="#Line-Modeling-Simulations" title="Permalink"></a></h1><p><strong>Originally Contributed by</strong>: Rodrigo Henriquez-Auba and José Daniel Lara</p><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>This tutorial will introduce an example of considering dynamic lines in <code>PowerSimulationsDynamics</code>.</p><p>This tutorial presents a simulation of a three-bus system, with an infinite bus (represented as a voltage source behind an impedance) at bus 1, a one d- one q- machine on bus 2 and an inverter of 19 states, as a virtual synchronous machine at bus 3. The perturbation will be the trip of two of the three circuits (triplicating its resistance and impedance) of the line that connects bus 1 and bus 3. This case also consider a dynamic line model for connection between buses 2 and 3. We will compare it against a system without dynamic lines.</p><p>It is recommended to check the OMIB tutorial first, since that includes more details and explanations on all definitions and functions.</p><h3 id="Step-1:-Package-Initialization"><a class="docs-heading-anchor" href="#Step-1:-Package-Initialization">Step 1: Package Initialization</a><a id="Step-1:-Package-Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Package-Initialization" title="Permalink"></a></h3><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSimulationsDynamics</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystems</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerNetworkMatrices</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystemCaseBuilder</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Sundials</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Plots</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>PowerSystemCaseBuilder.jl</code> is a helper library that makes it easier to reproduce examples in the documentation and tutorials. Normally you would pass your local files to create the system data instead of calling the function <code>build_system</code>. For more details visit <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/tutorials/powersystembuilder/">PowerSystemCaseBuilder Documentation</a></p></div></div><h3 id="Step-2:-Data-creation"><a class="docs-heading-anchor" href="#Step-2:-Data-creation">Step 2: Data creation</a><a id="Step-2:-Data-creation-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Data-creation" title="Permalink"></a></h3><p>Load the system using <code>PowerSystemCaseBuilder.jl</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; threebus_sys = build_system(PSIDSystems, &quot;Three Bus Dynamic data Example System&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">System
┌───────────────────┬─────────────┐
│ Property          │ Value       │
├───────────────────┼─────────────┤
│ Name              │             │
│ Description       │             │
│ System Units Base │ SYSTEM_BASE │
│ Base Power        │ 100.0       │
│ Base Frequency    │ 60.0        │
│ Num Components    │ 19          │
└───────────────────┴─────────────┘

Static Components
┌─────────────────┬───────┬────────────────────────┬───────────────┐
│ Type            │ Count │ Has Static Time Series │ Has Forecasts │
├─────────────────┼───────┼────────────────────────┼───────────────┤
│ ACBus           │ 3     │ false                  │ false         │
│ Arc             │ 3     │ false                  │ false         │
│ Area            │ 1     │ false                  │ false         │
│ Line            │ 3     │ false                  │ false         │
│ LoadZone        │ 1     │ false                  │ false         │
│ Source          │ 1     │ false                  │ false         │
│ StandardLoad    │ 3     │ false                  │ false         │
│ ThermalStandard │ 2     │ false                  │ false         │
└─────────────────┴───────┴────────────────────────┴───────────────┘

Dynamic Components
┌──────────────────┬───────┐
│ Type             │ Count │
├──────────────────┼───────┤
│ DynamicGenerator │ 1     │
│ DynamicInverter  │ 1     │
└──────────────────┴───────┘</code></pre><p>In addition, we will create a new copy of the system on which we will simulate the same case, but will consider dynamic lines:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; threebus_sys_dyn = deepcopy(threebus_sys);</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><h3 id="Step-3:-Create-the-fault-and-simulation-on-the-Static-Lines-system"><a class="docs-heading-anchor" href="#Step-3:-Create-the-fault-and-simulation-on-the-Static-Lines-system">Step 3: Create the fault and simulation on the Static Lines system</a><a id="Step-3:-Create-the-fault-and-simulation-on-the-Static-Lines-system-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3:-Create-the-fault-and-simulation-on-the-Static-Lines-system" title="Permalink"></a></h3><p>First, we construct the perturbation, by properly computing the new Ybus on the system:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Make a copy of the original system
       sys2 = deepcopy(threebus_sys)</code><code class="nohighlight hljs ansi" style="display:block;">System
┌───────────────────┬─────────────┐
│ Property          │ Value       │
├───────────────────┼─────────────┤
│ Name              │             │
│ Description       │             │
│ System Units Base │ SYSTEM_BASE │
│ Base Power        │ 100.0       │
│ Base Frequency    │ 60.0        │
│ Num Components    │ 19          │
└───────────────────┴─────────────┘

Static Components
┌─────────────────┬───────┬────────────────────────┬───────────────┐
│ Type            │ Count │ Has Static Time Series │ Has Forecasts │
├─────────────────┼───────┼────────────────────────┼───────────────┤
│ ACBus           │ 3     │ false                  │ false         │
│ Arc             │ 3     │ false                  │ false         │
│ Area            │ 1     │ false                  │ false         │
│ Line            │ 3     │ false                  │ false         │
│ LoadZone        │ 1     │ false                  │ false         │
│ Source          │ 1     │ false                  │ false         │
│ StandardLoad    │ 3     │ false                  │ false         │
│ ThermalStandard │ 2     │ false                  │ false         │
└─────────────────┴───────┴────────────────────────┴───────────────┘

Dynamic Components
┌──────────────────┬───────┐
│ Type             │ Count │
├──────────────────┼───────┤
│ DynamicGenerator │ 1     │
│ DynamicInverter  │ 1     │
└──────────────────┴───────┘</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Triplicates the impedance of the line named &quot;BUS 1-BUS 3-i_1&quot;
       fault_branches = get_components(ACBranch, sys2)</code><code class="nohighlight hljs ansi" style="display:block;">ACBranch Counts:
Line: 3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; for br in fault_branches
           if get_name(br) == &quot;BUS 1-BUS 3-i_1&quot;
               br.r = 3 * br.r
               br.x = 3 * br.x
               b_new = (from = br.b.from / 3, to = br.b.to / 3)
               br.b = b_new
           end
       end</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Obtain the new Ybus
       Ybus_fault = Ybus(sys2).data</code><code class="nohighlight hljs ansi" style="display:block;">3×3 SparseArrays.SparseMatrixCSC{ComplexF64, Int64} with 9 stored entries:
   0.91954-10.9011im   -0.689655+8.27586im   -0.229885+2.75862im
 -0.689655+8.27586im    0.714334-8.78642im  -0.0246792+1.11056im
 -0.229885+2.75862im  -0.0246792+1.11056im    0.254564-3.33585im</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Define Fault: Change of YBus
       Ybus_change = NetworkSwitch(
           1.0, #change at t = 1.0
           Ybus_fault, #New YBus
       );</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>Now, we construct the simulation:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Time span of our simulation
       tspan = (0.0, 30.0)</code><code class="nohighlight hljs ansi" style="display:block;">(0.0, 30.0)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Define Simulation
       sim = Simulation(
           ResidualModel, #Type of model used
           threebus_sys, #system
           pwd(), #folder to output results
           tspan, #time span
           Ybus_change, #Type of perturbation
       )</code><code class="nohighlight hljs ansi" style="display:block;">┌ Error: ResidualModel failed to build
│   exception =
│    ArgumentError: get_reactive_power_limits not implemented for Source
│    Stacktrace:
│      [1] get_reactive_power_limits(#unused#::Source)
│        @ PowerSystems ~/.julia/packages/PowerSystems/eHeD3/src/models/supplemental_accessors.jl:63
│      [2] _get_reactive_power_bound!(bus_reactivepower_bounds::Vector{Vector{Float64}}, bus_lookup::Dict{Int64, Int64}, sys::System)
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/common.jl:73
│      [3] PowerFlows.PowerFlowData(::PowerFlows.ACPowerFlow, sys::System; timesteps::Int64, timestep_names::Vector{String}, check_connectivity::Bool)
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/PowerFlowData.jl:197
│      [4] PowerFlowData
│        @ ~/.julia/packages/PowerFlows/2Elwp/src/PowerFlowData.jl:114 [inlined]
│      [5] solve_ac_powerflow!(system::System; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/nlsolve_ac_powerflow.jl:39
│      [6] solve_ac_powerflow!
│        @ ~/.julia/packages/PowerFlows/2Elwp/src/nlsolve_ac_powerflow.jl:33 [inlined]
│      [7] power_flow_solution!(initial_guess::Vector{Float64}, sys::System, inputs::PowerSimulationsDynamics.SimulationInputs)
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:14
│      [8] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:163 [inlined]
│      [9] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [10] _calculate_initial_guess!(x0_init::Vector{Float64}, sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:162
│     [11] precalculate_initial_conditions!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:184 [inlined]
│     [12] _pre_initialize_simulation!(sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:266
│     [13] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:409 [inlined]
│     [14] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [15] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:408 [inlined]
│     [16] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [17] _build!(sim::Simulation{ResidualModel}; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:389
│     [18] _build!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:378 [inlined]
│     [19] (::PowerSimulationsDynamics.var&quot;#109#110&quot;{Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}}, Simulation{ResidualModel}})()
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:444
│     [20] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [21] with_logger
│        @ ./logging.jl:626 [inlined]
│     [22] #build!#108
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:443 [inlined]
│     [23] build!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:441 [inlined]
│     [24] Simulation(::Type{ResidualModel}, system::System, simulation_folder::String, tspan::Tuple{Float64, Float64}, perturbations::Vector{NetworkSwitch}; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:188
│     [25] Simulation
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:166 [inlined]
│     [26] #Simulation#97
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:78 [inlined]
│     [27] Simulation(::Type{ResidualModel}, system::System, simulation_folder::String, tspan::Tuple{Float64, Float64}, perturbation::NetworkSwitch)
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:70
│     [28] top-level scope
│        @ REPL[2]:1
│     [29] eval
│        @ ./boot.jl:370 [inlined]
│     [30] #21
│        @ ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:721 [inlined]
│     [31] cd(f::Documenter.Expanders.var&quot;#21#23&quot;{Module}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [32] (::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module})()
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:720
│     [33] (::IOCapture.var&quot;#3#5&quot;{DataType, Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}, Task, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}})()
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:119
│     [34] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [35] with_logger
│        @ ./logging.jl:626 [inlined]
│     [36] capture(f::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}; rethrow::Type, color::Bool)
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:116
│     [37] runner(#unused#::Type{Documenter.Expanders.REPLBlocks}, x::Markdown.Code, page::Documenter.Documents.Page, doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:719
│     [38] dispatch(::Type{Documenter.Expanders.ExpanderPipeline}, ::Markdown.Code, ::Vararg{Any})
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [39] expand(doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:42
│     [40] runner(#unused#::Type{Documenter.Builder.ExpandTemplates}, doc::Documenter.Documents.Document)
│        @ Documenter.Builder ~/.julia/packages/Documenter/bYYzK/src/Builder.jl:226
│     [41] dispatch(#unused#::Type{Documenter.Builder.DocumentPipeline}, x::Documenter.Documents.Document)
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [42] #2
│        @ ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:273 [inlined]
│     [43] cd(f::Documenter.var&quot;#2#3&quot;{Documenter.Documents.Document}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [44] makedocs(; debug::Bool, format::Documenter.Writers.HTMLWriter.HTML, kwargs::Base.Pairs{Symbol, Any, Tuple{Symbol, Symbol, Symbol}, NamedTuple{(:modules, :sitename, :pages), Tuple{Vector{Module}, String, Vector{Any}}}})
│        @ Documenter ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:272
│     [45] top-level scope
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/docs/make.jl:3
│     [46] include(mod::Module, _path::String)
│        @ Base ./Base.jl:457
│     [47] exec_options(opts::Base.JLOptions)
│        @ Base ./client.jl:307
│     [48] _start()
│        @ Base ./client.jl:522
└ @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:434
Simulation Summary
┌─────────────────────────┬────────────────┐
│ Property                │ Value          │
├─────────────────────────┼────────────────┤
│ Status                  │ BUILD_FAILED   │
│ Simulation Type         │ Residual Model │
│ Initialized?            │ No             │
│ Multimachine system?    │ No             │
│ Time Span               │ (0.0, 30.0)    │
│ Number of States        │ 33             │
│ Number of Perturbations │ 1              │
└─────────────────────────┴────────────────┘</code></pre><p>We can obtain the initial conditions as:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Print the initial states. It also give the symbols used to describe those states.
       show_states_initial_value(sim)</code><code class="nohighlight hljs ansi" style="display:block;">Voltage Variables
====================
BUS 1
====================
Vm 1.0
θ 0.0
====================
BUS 2
====================
Vm 1.0
θ 0.0
====================
BUS 3
====================
Vm 1.0
θ 0.0
====================
====================
Differential States
generator-102-1
====================
eq_p 0.0
ed_p 0.0
δ 0.0
ω 0.0
Vf 0.0
Vr1 0.0
Vr2 0.0
Vm 0.0
====================
Differential States
generator-103-1
====================
θ_oc 0.0
ω_oc 0.0
q_oc 0.0
ξd_ic 0.0
ξq_ic 0.0
γd_ic 0.0
γq_ic 0.0
ϕd_ic 0.0
ϕq_ic 0.0
vd_pll 0.0
vq_pll 0.0
ε_pll 0.0
θ_pll 0.0
ir_cnv 0.0
ii_cnv 0.0
vr_filter 0.0
vi_filter 0.0
ir_filter 0.0
ii_filter 0.0
====================</code></pre><h3 id="Step-4:-Run-the-simulation-of-the-Static-Lines-System"><a class="docs-heading-anchor" href="#Step-4:-Run-the-simulation-of-the-Static-Lines-System">Step 4: Run the simulation of the Static Lines System</a><a id="Step-4:-Run-the-simulation-of-the-Static-Lines-System-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-Run-the-simulation-of-the-Static-Lines-System" title="Permalink"></a></h3><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Run the simulation
       execute!(
           sim, #simulation structure
           IDA(), #Sundials DAE Solver
           dtmax = 0.02, #Maximum step size
       )</code><code class="nohighlight hljs ansi" style="display:block;">┌ Error: Execution failed
│   exception =
│    The Simulation status is BUILD_FAILED. Can not continue, correct your inputs and build the simulation again.
│    Stacktrace:
│      [1] error(s::String)
│        @ Base ./error.jl:35
│      [2] simulation_pre_step!(sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:462
│      [3] _execute!(sim::Simulation{ResidualModel}, solver::Sundials.IDA{:Dense, Nothing, Nothing}; kwargs::Base.Pairs{Symbol, Float64, Tuple{Symbol}, NamedTuple{(:dtmax,), Tuple{Float64}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:488
│      [4] _execute!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:486 [inlined]
│      [5] (::PowerSimulationsDynamics.var&quot;#117#118&quot;{Base.Pairs{Symbol, Float64, Tuple{Symbol}, NamedTuple{(:dtmax,), Tuple{Float64}}}, Simulation{ResidualModel}, Sundials.IDA{:Dense, Nothing, Nothing}})()
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:545
│      [6] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│      [7] with_logger
│        @ ./logging.jl:626 [inlined]
│      [8] #execute!#116
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:543 [inlined]
│      [9] top-level scope
│        @ REPL[1]:1
│     [10] eval
│        @ ./boot.jl:370 [inlined]
│     [11] #21
│        @ ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:721 [inlined]
│     [12] cd(f::Documenter.Expanders.var&quot;#21#23&quot;{Module}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [13] (::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module})()
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:720
│     [14] (::IOCapture.var&quot;#3#5&quot;{DataType, Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}, Task, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}})()
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:119
│     [15] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [16] with_logger
│        @ ./logging.jl:626 [inlined]
│     [17] capture(f::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}; rethrow::Type, color::Bool)
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:116
│     [18] runner(#unused#::Type{Documenter.Expanders.REPLBlocks}, x::Markdown.Code, page::Documenter.Documents.Page, doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:719
│     [19] dispatch(::Type{Documenter.Expanders.ExpanderPipeline}, ::Markdown.Code, ::Vararg{Any})
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [20] expand(doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:42
│     [21] runner(#unused#::Type{Documenter.Builder.ExpandTemplates}, doc::Documenter.Documents.Document)
│        @ Documenter.Builder ~/.julia/packages/Documenter/bYYzK/src/Builder.jl:226
│     [22] dispatch(#unused#::Type{Documenter.Builder.DocumentPipeline}, x::Documenter.Documents.Document)
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [23] #2
│        @ ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:273 [inlined]
│     [24] cd(f::Documenter.var&quot;#2#3&quot;{Documenter.Documents.Document}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [25] makedocs(; debug::Bool, format::Documenter.Writers.HTMLWriter.HTML, kwargs::Base.Pairs{Symbol, Any, Tuple{Symbol, Symbol, Symbol}, NamedTuple{(:modules, :sitename, :pages), Tuple{Vector{Module}, String, Vector{Any}}}})
│        @ Documenter ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:272
│     [26] top-level scope
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/docs/make.jl:3
│     [27] include(mod::Module, _path::String)
│        @ Base ./Base.jl:457
│     [28] exec_options(opts::Base.JLOptions)
│        @ Base ./client.jl:307
│     [29] _start()
│        @ Base ./client.jl:522
└ @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:547
SIMULATION_FAILED::BUILD_STATUS = 7</code></pre><h3 id="Step-5:-Store-the-solution"><a class="docs-heading-anchor" href="#Step-5:-Store-the-solution">Step 5: Store the solution</a><a id="Step-5:-Store-the-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Step-5:-Store-the-solution" title="Permalink"></a></h3><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; results = read_results(sim)</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; series2 = get_voltage_magnitude_series(results, 102)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching get_voltage_magnitude_series(::Nothing, ::Int64)

Closest candidates are:
  get_voltage_magnitude_series(!Matched::SimulationResults, ::Int64; dt)
   @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_results.jl:321</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; zoom = [
           (series2[1][ix], series2[2][ix]) for
           (ix, s) in enumerate(series2[1]) if (s &gt; 0.90 &amp;&amp; s &lt; 1.6)
       ];</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `series2` not defined</code></pre><h3 id="Step-3.1:-Create-the-fault-and-simulation-on-the-Dynamic-Lines-system"><a class="docs-heading-anchor" href="#Step-3.1:-Create-the-fault-and-simulation-on-the-Dynamic-Lines-system">Step 3.1: Create the fault and simulation on the Dynamic Lines system</a><a id="Step-3.1:-Create-the-fault-and-simulation-on-the-Dynamic-Lines-system-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3.1:-Create-the-fault-and-simulation-on-the-Dynamic-Lines-system" title="Permalink"></a></h3><p>An important aspect to consider is that DynamicLines must not be considered in the computation of the Ybus. First we construct the Dynamic Line, by finding the Line named &quot;BUS 2-BUS 3-i_1&quot;, and then adding it to the system.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # get component return the Branch on threebus_sys_dyn named &quot;BUS 2-BUS 3-i_1&quot;
       dyn_branch = DynamicBranch(get_component(Line, threebus_sys_dyn,&quot;BUS 2-BUS 3-i_1&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">
BUS 2-BUS 3-i_1 (DynamicBranch):
   branch: BUS 2-BUS 3-i_1 (Line)
   n_states: 2
   states: [:Il_R, :Il_I]
   internal: InfrastructureSystems.InfrastructureSystemsInternal</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # Adding a dynamic line will immediately remove the static line from the system.
       add_component!(threebus_sys_dyn, dyn_branch)</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>Similarly, we construct the Ybus fault by creating a copy of the original system, but removing the Line &quot;BUS 2-BUS 3-i_1&quot; to avoid considering it in the Ybus:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Make a copy of the original system
       sys3 = deepcopy(threebus_sys);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Remove Line &quot;BUS 2-BUS 3-i_1&quot;
       remove_component!(Line, sys3, &quot;BUS 2-BUS 3-i_1&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Triplicates the impedance of the line named &quot;BUS 1-BUS 2-i_1&quot;
       fault_branches2 = get_components(Line, sys3)</code><code class="nohighlight hljs ansi" style="display:block;">Line Counts:
Line: 2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; for br in fault_branches2
           if get_name(br) == &quot;BUS 1-BUS 3-i_1&quot;
               br.r = 3 * br.r
               br.x = 3 * br.x
               b_new = (from = br.b.from / 3, to = br.b.to / 3)
               br.b = b_new
           end
       end</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Obtain the new Ybus
       Ybus_fault_dyn = Ybus(sys3).data</code><code class="nohighlight hljs ansi" style="display:block;">3×3 SparseArrays.SparseMatrixCSC{ComplexF64, Int64} with 7 stored entries:
   0.91954-10.9011im  -0.689655+8.27586im  -0.229885+2.75862im
 -0.689655+8.27586im   0.689655-8.17586im            ⋅
 -0.229885+2.75862im            ⋅           0.229885-2.72529im</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Define Fault: Change of YBus
       Ybus_change_dyn = NetworkSwitch(
           1.0, #change at t = 1.0
           Ybus_fault_dyn, #New YBus
       )</code><code class="nohighlight hljs ansi" style="display:block;">NetworkSwitch(1.0, sparse([1, 2, 3, 4, 5, 6, 1, 2, 4, 5  …  5, 6, 1, 2, 4, 5, 1, 3, 4, 6], [1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6], [0.9195402298850576, -0.6896551724137931, -0.2298850574712644, 10.901149425287358, -8.275862068965518, -2.7586206896551726, -0.6896551724137931, 0.6896551724137931, -8.275862068965518, 8.175862068965518  …  -0.6896551724137931, -0.2298850574712644, 8.275862068965518, -8.175862068965518, -0.6896551724137931, 0.6896551724137931, 2.7586206896551726, -2.7252873563218394, -0.2298850574712644, 0.2298850574712644], 6, 6))</code></pre><h3 id="Step-4.1:-Run-the-simulation-of-the-Dynamic-Lines-System"><a class="docs-heading-anchor" href="#Step-4.1:-Run-the-simulation-of-the-Dynamic-Lines-System">Step 4.1: Run the simulation of the Dynamic Lines System</a><a id="Step-4.1:-Run-the-simulation-of-the-Dynamic-Lines-System-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4.1:-Run-the-simulation-of-the-Dynamic-Lines-System" title="Permalink"></a></h3><p>Now, we construct the simulation:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # Define Simulation
       sim_dyn = Simulation(
           ResidualModel, #Type of model used
           threebus_sys_dyn, #system
           pwd(), #folder to output results
           (0.0, 30.0), #time span
           Ybus_change_dyn, #Type of perturbation
       )</code><code class="nohighlight hljs ansi" style="display:block;">┌ Error: ResidualModel failed to build
│   exception =
│    ArgumentError: get_reactive_power_limits not implemented for Source
│    Stacktrace:
│      [1] get_reactive_power_limits(#unused#::Source)
│        @ PowerSystems ~/.julia/packages/PowerSystems/eHeD3/src/models/supplemental_accessors.jl:63
│      [2] _get_reactive_power_bound!(bus_reactivepower_bounds::Vector{Vector{Float64}}, bus_lookup::Dict{Int64, Int64}, sys::System)
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/common.jl:73
│      [3] PowerFlows.PowerFlowData(::PowerFlows.ACPowerFlow, sys::System; timesteps::Int64, timestep_names::Vector{String}, check_connectivity::Bool)
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/PowerFlowData.jl:197
│      [4] PowerFlowData
│        @ ~/.julia/packages/PowerFlows/2Elwp/src/PowerFlowData.jl:114 [inlined]
│      [5] solve_ac_powerflow!(system::System; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerFlows ~/.julia/packages/PowerFlows/2Elwp/src/nlsolve_ac_powerflow.jl:39
│      [6] solve_ac_powerflow!
│        @ ~/.julia/packages/PowerFlows/2Elwp/src/nlsolve_ac_powerflow.jl:33 [inlined]
│      [7] power_flow_solution!(initial_guess::Vector{Float64}, sys::System, inputs::PowerSimulationsDynamics.SimulationInputs)
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:14
│      [8] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:163 [inlined]
│      [9] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [10] _calculate_initial_guess!(x0_init::Vector{Float64}, sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:162
│     [11] precalculate_initial_conditions!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_initialization.jl:184 [inlined]
│     [12] _pre_initialize_simulation!(sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:266
│     [13] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:409 [inlined]
│     [14] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [15] macro expansion
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:408 [inlined]
│     [16] macro expansion
│        @ ~/.julia/packages/TimerOutputs/RsWnF/src/TimerOutput.jl:237 [inlined]
│     [17] _build!(sim::Simulation{ResidualModel}; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:389
│     [18] _build!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:378 [inlined]
│     [19] (::PowerSimulationsDynamics.var&quot;#109#110&quot;{Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}}, Simulation{ResidualModel}})()
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:444
│     [20] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [21] with_logger
│        @ ./logging.jl:626 [inlined]
│     [22] #build!#108
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:443 [inlined]
│     [23] build!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:441 [inlined]
│     [24] Simulation(::Type{ResidualModel}, system::System, simulation_folder::String, tspan::Tuple{Float64, Float64}, perturbations::Vector{NetworkSwitch}; kwargs::Base.Pairs{Symbol, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:188
│     [25] Simulation
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:166 [inlined]
│     [26] #Simulation#97
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:78 [inlined]
│     [27] Simulation(::Type{ResidualModel}, system::System, simulation_folder::String, tspan::Tuple{Float64, Float64}, perturbation::NetworkSwitch)
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:70
│     [28] top-level scope
│        @ REPL[1]:1
│     [29] eval
│        @ ./boot.jl:370 [inlined]
│     [30] #21
│        @ ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:721 [inlined]
│     [31] cd(f::Documenter.Expanders.var&quot;#21#23&quot;{Module}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [32] (::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module})()
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:720
│     [33] (::IOCapture.var&quot;#3#5&quot;{DataType, Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}, Task, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}})()
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:119
│     [34] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [35] with_logger
│        @ ./logging.jl:626 [inlined]
│     [36] capture(f::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}; rethrow::Type, color::Bool)
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:116
│     [37] runner(#unused#::Type{Documenter.Expanders.REPLBlocks}, x::Markdown.Code, page::Documenter.Documents.Page, doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:719
│     [38] dispatch(::Type{Documenter.Expanders.ExpanderPipeline}, ::Markdown.Code, ::Vararg{Any})
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [39] expand(doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:42
│     [40] runner(#unused#::Type{Documenter.Builder.ExpandTemplates}, doc::Documenter.Documents.Document)
│        @ Documenter.Builder ~/.julia/packages/Documenter/bYYzK/src/Builder.jl:226
│     [41] dispatch(#unused#::Type{Documenter.Builder.DocumentPipeline}, x::Documenter.Documents.Document)
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [42] #2
│        @ ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:273 [inlined]
│     [43] cd(f::Documenter.var&quot;#2#3&quot;{Documenter.Documents.Document}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [44] makedocs(; debug::Bool, format::Documenter.Writers.HTMLWriter.HTML, kwargs::Base.Pairs{Symbol, Any, Tuple{Symbol, Symbol, Symbol}, NamedTuple{(:modules, :sitename, :pages), Tuple{Vector{Module}, String, Vector{Any}}}})
│        @ Documenter ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:272
│     [45] top-level scope
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/docs/make.jl:3
│     [46] include(mod::Module, _path::String)
│        @ Base ./Base.jl:457
│     [47] exec_options(opts::Base.JLOptions)
│        @ Base ./client.jl:307
│     [48] _start()
│        @ Base ./client.jl:522
└ @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:434
Simulation Summary
┌─────────────────────────┬────────────────┐
│ Property                │ Value          │
├─────────────────────────┼────────────────┤
│ Status                  │ BUILD_FAILED   │
│ Simulation Type         │ Residual Model │
│ Initialized?            │ No             │
│ Multimachine system?    │ No             │
│ Time Span               │ (0.0, 30.0)    │
│ Number of States        │ 35             │
│ Number of Perturbations │ 1              │
└─────────────────────────┴────────────────┘</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # Run the simulation
       execute!(
           sim_dyn, #simulation structure
           IDA(), #Sundials DAE Solver
           dtmax = 0.02, #Maximum step size
       )</code><code class="nohighlight hljs ansi" style="display:block;">┌ Error: Execution failed
│   exception =
│    The Simulation status is BUILD_FAILED. Can not continue, correct your inputs and build the simulation again.
│    Stacktrace:
│      [1] error(s::String)
│        @ Base ./error.jl:35
│      [2] simulation_pre_step!(sim::Simulation{ResidualModel})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:462
│      [3] _execute!(sim::Simulation{ResidualModel}, solver::Sundials.IDA{:Dense, Nothing, Nothing}; kwargs::Base.Pairs{Symbol, Float64, Tuple{Symbol}, NamedTuple{(:dtmax,), Tuple{Float64}}})
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:488
│      [4] _execute!
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:486 [inlined]
│      [5] (::PowerSimulationsDynamics.var&quot;#117#118&quot;{Base.Pairs{Symbol, Float64, Tuple{Symbol}, NamedTuple{(:dtmax,), Tuple{Float64}}}, Simulation{ResidualModel}, Sundials.IDA{:Dense, Nothing, Nothing}})()
│        @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:545
│      [6] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│      [7] with_logger
│        @ ./logging.jl:626 [inlined]
│      [8] #execute!#116
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:543 [inlined]
│      [9] top-level scope
│        @ REPL[1]:1
│     [10] eval
│        @ ./boot.jl:370 [inlined]
│     [11] #21
│        @ ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:721 [inlined]
│     [12] cd(f::Documenter.Expanders.var&quot;#21#23&quot;{Module}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [13] (::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module})()
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:720
│     [14] (::IOCapture.var&quot;#3#5&quot;{DataType, Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}, Task, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}})()
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:119
│     [15] with_logstate(f::Function, logstate::Any)
│        @ Base.CoreLogging ./logging.jl:514
│     [16] with_logger
│        @ ./logging.jl:626 [inlined]
│     [17] capture(f::Documenter.Expanders.var&quot;#20#22&quot;{Documenter.Documents.Page, Module}; rethrow::Type, color::Bool)
│        @ IOCapture ~/.julia/packages/IOCapture/8Uj7o/src/IOCapture.jl:116
│     [18] runner(#unused#::Type{Documenter.Expanders.REPLBlocks}, x::Markdown.Code, page::Documenter.Documents.Page, doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:719
│     [19] dispatch(::Type{Documenter.Expanders.ExpanderPipeline}, ::Markdown.Code, ::Vararg{Any})
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [20] expand(doc::Documenter.Documents.Document)
│        @ Documenter.Expanders ~/.julia/packages/Documenter/bYYzK/src/Expanders.jl:42
│     [21] runner(#unused#::Type{Documenter.Builder.ExpandTemplates}, doc::Documenter.Documents.Document)
│        @ Documenter.Builder ~/.julia/packages/Documenter/bYYzK/src/Builder.jl:226
│     [22] dispatch(#unused#::Type{Documenter.Builder.DocumentPipeline}, x::Documenter.Documents.Document)
│        @ Documenter.Utilities.Selectors ~/.julia/packages/Documenter/bYYzK/src/Utilities/Selectors.jl:170
│     [23] #2
│        @ ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:273 [inlined]
│     [24] cd(f::Documenter.var&quot;#2#3&quot;{Documenter.Documents.Document}, dir::String)
│        @ Base.Filesystem ./file.jl:112
│     [25] makedocs(; debug::Bool, format::Documenter.Writers.HTMLWriter.HTML, kwargs::Base.Pairs{Symbol, Any, Tuple{Symbol, Symbol, Symbol}, NamedTuple{(:modules, :sitename, :pages), Tuple{Vector{Module}, String, Vector{Any}}}})
│        @ Documenter ~/.julia/packages/Documenter/bYYzK/src/Documenter.jl:272
│     [26] top-level scope
│        @ ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/docs/make.jl:3
│     [27] include(mod::Module, _path::String)
│        @ Base ./Base.jl:457
│     [28] exec_options(opts::Base.JLOptions)
│        @ Base ./client.jl:307
│     [29] _start()
│        @ Base ./client.jl:522
└ @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation.jl:547
SIMULATION_FAILED::BUILD_STATUS = 7</code></pre><p>We can obtain the initial conditions as:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; #Print the initial states. It also give the symbols used to describe those states.
       show_states_initial_value(sim_dyn)</code><code class="nohighlight hljs ansi" style="display:block;">Voltage Variables
====================
BUS 1
====================
Vm 1.0
θ 0.0
====================
BUS 2
====================
Vm 1.0
θ 0.0
====================
BUS 3
====================
Vm 1.0
θ 0.0
====================
====================
Differential States
generator-102-1
====================
eq_p 0.0
ed_p 0.0
δ 0.0
ω 0.0
Vf 0.0
Vr1 0.0
Vr2 0.0
Vm 0.0
====================
Differential States
generator-103-1
====================
θ_oc 0.0
ω_oc 0.0
q_oc 0.0
ξd_ic 0.0
ξq_ic 0.0
γd_ic 0.0
γq_ic 0.0
ϕd_ic 0.0
ϕq_ic 0.0
vd_pll 0.0
vq_pll 0.0
ε_pll 0.0
θ_pll 0.0
ir_cnv 0.0
ii_cnv 0.0
vr_filter 0.0
vi_filter 0.0
ir_filter 0.0
ii_filter 0.0
====================
====================
Line Current States
====================
Line BUS 2-BUS 3-i_1
Il_R 0.0
Il_I 0.0
====================</code></pre><h3 id="Step-5.1:-Store-the-solution"><a class="docs-heading-anchor" href="#Step-5.1:-Store-the-solution">Step 5.1: Store the solution</a><a id="Step-5.1:-Store-the-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Step-5.1:-Store-the-solution" title="Permalink"></a></h3><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; results_dyn = read_results(sim_dyn)</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; series2_dyn = get_voltage_magnitude_series(results_dyn, 102);</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching get_voltage_magnitude_series(::Nothing, ::Int64)

Closest candidates are:
  get_voltage_magnitude_series(!Matched::SimulationResults, ::Int64; dt)
   @ PowerSimulationsDynamics ~/work/PowerSimulationsDynamics.jl/PowerSimulationsDynamics.jl/src/base/simulation_results.jl:321</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; zoom_dyn = [
           (series2_dyn[1][ix], series2_dyn[2][ix]) for
           (ix, s) in enumerate(series2_dyn[1]) if (s &gt; 0.90 &amp;&amp; s &lt; 1.6)
       ];</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `series2_dyn` not defined</code></pre><h3 id="Step-6.1:-Compare-the-solutions:"><a class="docs-heading-anchor" href="#Step-6.1:-Compare-the-solutions:">Step 6.1: Compare the solutions:</a><a id="Step-6.1:-Compare-the-solutions:-1"></a><a class="docs-heading-anchor-permalink" href="#Step-6.1:-Compare-the-solutions:" title="Permalink"></a></h3><p>We can observe the effect of Dynamic Lines</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(series2_dyn, label = &quot;V_gen_dyn&quot;);</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `series2_dyn` not defined</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot!(series2, label = &quot;V_gen_st&quot;, xlabel = &quot;Time [s]&quot;, ylabel = &quot;Voltage [pu]&quot;);</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `series2` not defined</code></pre><p><img src="../figs/plot_dynlines.svg" alt="plot"/></p><p>that looks quite similar. The differences can be observed in the zoom plot:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(zoom_dyn, label = &quot;V_gen_dyn&quot;);</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `zoom_dyn` not defined</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot!(zoom, label = &quot;V_gen_st&quot;, xlabel = &quot;Time [s]&quot;, ylabel = &quot;Voltage [pu]&quot;);</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `zoom` not defined</code></pre><p><img src="../figs/plot_dynlines_zoom.svg" alt="plot"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_omib/">« OMIB</a><a class="docs-footer-nextpage" href="../tutorial_inverter_modeling/">Inverter Modeling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 11 December 2023 18:29">Monday 11 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
